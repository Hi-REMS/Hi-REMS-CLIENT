/* 메인화면 CSS */
/* 최상위 */
.rems-dashboard { background: var(--bg); color: var(--text); min-height: 100vh; }
.rems-txt-warn { color: var(--warn); }

/* Topbar (옵션) */
.rems-topbar {
  position: sticky; top: 0; z-index: 10;
  display: flex; align-items: center; justify-content: space-between;
  padding: 14px 20px;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(180deg, color-mix(in srgb, var(--surface) 92%, transparent), color-mix(in srgb, var(--surface) 70%, transparent));
  backdrop-filter: blur(6px);
}
.rems-brand { display:flex; align-items:center; gap:10px; font-weight:700; }
.rems-dot { width:8px; height:8px; border-radius:50%; background:var(--accent); display:inline-block; }
.rems-logo { letter-spacing:.5px; }
.rems-badge { font-size:12px; color:var(--muted); border:1px solid var(--border); padding:2px 6px; border-radius:6px; }
.rems-live { font-size:12px; color:var(--muted); }

/* Grid */
.rems-grid { padding: 16px; margin: 0 auto; max-width: 1400px; display: grid; grid-template-columns: repeat(12, minmax(0,1fr)); gap: 16px; }
.rems-col-12 { grid-column: span 12; } .rems-col-8 { grid-column: span 8; }
.rems-col-6 { grid-column: span 6; } .rems-col-4 { grid-column: span 4; }
.rems-col-3 { grid-column: span 3; } .rems-row-2 { grid-row: span 2; }
@media (max-width: 1200px) { .rems-col-8, .rems-col-6, .rems-col-4, .rems-col-3 { grid-column: span 12; } .rems-row-2 { grid-row: auto; } }

/* Card */
.rems-card { background: var(--surface); border: 1px solid var(--border); border-radius: 14px; box-shadow: 0 6px 16px color-mix(in srgb, #000 25%, transparent); }
.rems-card-hd { display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid var(--border); }
.rems-card-hd h3 { font-size:14px; letter-spacing:.2px; }
.rems-hint { color: var(--muted); font-size: 13px; }

/* Summary */
.rems-summary ul { display:grid; grid-template-columns:1fr 1fr; gap:10px 18px; padding:14px 16px; }
.rems-summary li { display:flex; align-items:center; justify-content:space-between; color:var(--muted); font-size:13px; }
.rems-summary li strong { color:var(--text); font-weight:700; }
.rems-mt-split { margin-top:8px; border-top:1px dashed color-mix(in srgb, var(--text) 12%, transparent); padding-top:10px; }
.rems-loading-note { margin-top:8px; font-size:12px; color:var(--muted); }

/* Stat tiles */
.rems-stat-tiles { font-size: clamp(12px, 1.5vw, 20px); overflow-wrap:anywhere; word-break:break-all; white-space:normal; line-height:1.2; display:grid; grid-template-columns:1fr 1fr; gap:10px; padding:14px 16px; }
.rems-tile { background:var(--surface-2); border:1px solid var(--border); border-radius:12px; padding:12px; }
.rems-t-caption { color:var(--muted); font-size:12px; margin-bottom:6px; }
.rems-t-value { font-weight:800; font-size:18px; }
.rems-unit { font-weight:400; font-size:12px; color:var(--muted); margin-left:4px; }

/* Table */
.rems-table-wrap { padding: 8px 12px 14px 12px; }
.rems-table { width:100%; border-collapse:collapse; font-size:13px; }
.rems-table thead th { text-align:left; color:var(--muted); font-weight:600; padding:10px 8px; border-bottom:1px solid var(--border); }
.rems-num { text-align:right; }
.rems-table tbody td { padding:10px 8px; border-bottom:1px dashed color-mix(in srgb, var(--text) 10%, transparent); }
.rems-table tbody tr:hover { background: color-mix(in srgb, var(--accent) 8%, transparent); }
.rems-card.rems-row-2 .rems-table-wrap { max-height: 560px; overflow:auto; }
.rems-card.rems-row-2 .rems-table-wrap::-webkit-scrollbar { width:8px; }
.rems-card.rems-row-2 .rems-table-wrap::-webkit-scrollbar-thumb { background: color-mix(in srgb, var(--muted) 25%, transparent); border-radius:6px; }

/* Map */
.rems-map-card { position:relative; overflow:hidden; }
.rems-kmap { width: 100%; height: 560px !important; border-radius: 12px; }
.rems-map { position:relative; min-height: 560px; }

/* Side panel */
.rems-map-panel{ position:absolute; left:12px; top:12px; width:200px; background: color-mix(in srgb, var(--surface) 88%, transparent); border:1px solid var(--border); border-radius:12px; padding:10px; max-height:420px; overflow:auto; backdrop-filter: blur(6px); }
.rems-panel-hd { font-size:12px; color:var(--muted); margin-bottom:8px; }
.rems-map-panel ul { list-style:none; margin:0; padding:0; }
.rems-map-panel li { padding:8px 10px; border-radius:8px; cursor:default; }
.rems-map-panel li:hover { background: color-mix(in srgb, var(--accent) 8%, transparent); }

/* Legend */
.rems-legend{ position:absolute; left:12px; bottom:12px; display:flex; gap:8px; flex-wrap:wrap; background: color-mix(in srgb, var(--surface) 88%, transparent); padding:8px 10px; border-radius:10px; border:1px solid var(--border); }
.rems-lg { display:inline-flex; align-items:center; gap:6px; padding:4px 8px; border-radius:999px; font-size:12px; color:var(--text); }
.rems-lg::before { content:''; width:10px; height:10px; border-radius:2px; display:inline-block; }
.rems-lg-ok::before{background:var(--ok);} .rems-lg-idle::before{background:var(--idle);} .rems-lg-paused::before{background:var(--paused);}
.rems-lg-warn::before{background:var(--warn);} .rems-lg-danger::before{background:var(--danger);}

/* Chip / Select */
.rems-chip{ font-size:13px; color:var(--chip-text); background: linear-gradient(180deg, color-mix(in srgb, var(--chip-bg) 96%, transparent), color-mix(in srgb, var(--chip-bg) 82%, transparent)); border:1px solid color-mix(in srgb, var(--chip-border) 85%, var(--accent) 15%); padding:8px 12px; border-radius:999px; transition: background-color .15s ease, border-color .15s ease, box-shadow .15s ease, transform .15s ease; box-shadow: inset 0 1px 0 color-mix(in srgb, #fff 10%, transparent), 0 1px 2px color-mix(in srgb, #000 20%, transparent); }
.rems-chip:hover{ background: linear-gradient(180deg, color-mix(in srgb, var(--chip-hover-bg) 96%, transparent), color-mix(in srgb, var(--chip-hover-bg) 86%, transparent)); border-color: color-mix(in srgb, var(--accent) 35%, var(--chip-border) 65%); box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 12%, transparent); }
.rems-chip:active{ transform: translateY(1px); }

.rems-map-breadcrumbs .rems-chip{ background: linear-gradient(180deg, color-mix(in srgb, var(--crumb-bg) 96%, transparent), color-mix(in srgb, var(--crumb-bg) 82%, transparent)); border-color: var(--crumb-border); }
.rems-map-breadcrumbs .rems-chip:hover{ background: color-mix(in srgb, var(--crumb-hover-bg) 92%, transparent); }

.rems-row-click { cursor:pointer; }
.rems-row-click:hover { background: color-mix(in srgb, var(--text) 4%, transparent); }

/* Quick actions */
.rems-quick-actions { display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap:12px; padding:14px 16px 18px; }
@media (max-width: 1200px) { .rems-quick-actions { grid-template-columns: repeat(2, minmax(0,1fr)); } }
@media (max-width: 640px)  { .rems-quick-actions { grid-template-columns: 1fr; } }
/* Quick actions – Plain style (no gradient, no shadow) */
.rems-qa-btn{
  display:flex; align-items:center; gap:12px;
  padding:14px;
  border:1px solid var(--border);
  border-radius:14px;
  background: transparent;            /* ← 기본(투명) 배경 */
  color:var(--text);
  text-decoration:none;
  transition: border-color .15s, transform .15s, box-shadow .15s, background-color .15s;

  /* no effects */
  box-shadow:none;                     /* ← 그림자 제거 */
  transform:none;                      /* ← 떠오르는 효과 제거 */
}

.rems-qa-btn:hover{
  /* hover에서도 아무 효과 없이 보더만 살짝 */
  border-color: color-mix(in srgb, var(--accent) 25%, var(--border) 75%);
  background: transparent;
  box-shadow:none;
  transform:none;
}

/* 라이트 테마에서도 hover 그림자 제거 */
html[data-theme="light"] .rems-qa-btn:hover{
  box-shadow:none;
}

/* 아이콘도 심플하게(배경 틴트만 약하게 유지하거나 완전 투명 원하면 background: transparent; 로) */
.rems-qa-icon{
  width:40px; height:40px; flex:0 0 40px;
  display:flex; align-items:center; justify-content:center;
  border-radius:10px;
  background: transparent;            /* ← 아이콘 배경도 투명 */
  font-size:20px;
}

/* 접근성 포커스(키보드 탭) 강조 */
.rems-qa-btn:focus-visible{
  outline: 2px solid color-mix(in srgb, var(--accent) 55%, transparent);
  outline-offset: 2px;
}

/* 제목/설명 기존 그대로 */
.rems-qa-text{ display:flex; flex-direction:column; gap:2px; }
.rems-qa-title{ font-weight:800; letter-spacing:.2px; }
.rems-qa-desc{ font-size:12px; color:var(--muted); }


/* Map count bubbles */
.rems-count-bubble{ min-width:120px; max-width:170px; padding:10px 12px; border-radius:14px; background: color-mix(in srgb, var(--surface) 92%, transparent); border: 1px solid color-mix(in srgb, var(--text) 12%, transparent); color: var(--text); text-align:center; box-shadow: 0 10px 26px color-mix(in srgb, #000 35%, transparent); transform: translateY(-6px); user-select:none; pointer-events:auto; backdrop-filter: blur(4px); }
.rems-count-bubble.rems-small{ min-width:110px; max-width:150px; padding:8px 10px; }
.rems-count-bubble:hover{ transform: translateY(-8px); border-color: color-mix(in srgb, var(--accent) 35%, var(--border) 65%); box-shadow: 0 14px 28px color-mix(in srgb, #000 45%, transparent); }
.rems-cb-name{ font-size:12px; opacity:.9; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.rems-cb-num{ margin-top:4px; font-weight:800; font-size:18px; letter-spacing:.2px; }
.rems-map-card .rems-count-bubble{ z-index: 2; }

.rems-map-breadcrumbs{ display:flex; align-items:center; gap:12px; }
.rems-crumbs{ margin-left:auto; display:flex; align-items:center; gap:6px; }
.rems-crumbs .rems-chip{ cursor:pointer; }
.rems-crumbs .rems-strong{ font-weight:700; }
.rems-crumbs .rems-dim{ opacity:.9 }
.rems-sep{ opacity:.5 }

.rems-count-bubble.rems-dim{ opacity:.35; filter:saturate(60%); }
.rems-count-bubble.rems-active{ box-shadow: 0 6px 18px color-mix(in srgb, var(--accent) 45%, transparent); transform: translateZ(0) scale(1.02); }
.rems-table .rems-active td{ background: color-mix(in srgb, var(--accent) 8%, transparent); }

/* 드롭다운 (단색, 3px) */
.rems-select-dark {
  font-size: 13px;
  line-height: 1.25;
  color: var(--select-text);
  min-width: 180px;
  padding: 8px 36px 8px 10px;
  border-radius: 3px;
  border: 1px solid var(--select-border);
  background-color: var(--select-bg);
  outline: none;
  appearance: none;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 20 20'><path d='M6 8l4 4 4-4' fill='none' stroke='%230ea5e9' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/></svg>");
  background-repeat: no-repeat;
  background-position: right 10px center;
  background-size: 14px;
  transition: border-color .15s ease, box-shadow .15s ease;
}
.rems-select-dark:hover{
  border-color: color-mix(in srgb, var(--accent) 35%, var(--select-border) 65%);
}
.rems-select-dark:focus,
.rems-select-dark:focus-visible{
  border-color: color-mix(in srgb, var(--accent) 45%, var(--select-border) 55%);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 18%, transparent), inset 0 1px 0 color-mix(in srgb, #fff 10%, transparent);
}
.rems-select-dark:active{ transform: translateY(1px); }
.rems-select-dark:disabled{ opacity:.6; cursor:not-allowed; }
.rems-select-dark option, .rems-select-dark optgroup{ background: var(--surface); color: var(--text); }
.rems-select-dark::-ms-expand{ display:none; }

/* 접근성/포커스 */
.rems-kmap:focus { outline:2px solid var(--accent); outline-offset:2px; }

/* 포커스 펄스 */
.rems-focus-pulse{ position:relative; transform:translate(-50%,-50%); pointer-events:none; }
.rems-focus-pulse .rems-ring{
  width:26px; height:26px; border-radius:999px;
  border:2px solid var(--accent);
  box-shadow:0 0 0 0 color-mix(in srgb, var(--accent) 60%, transparent);
  animation:rems-pulse 1.8s ease-out infinite;
  background: color-mix(in srgb, var(--accent) 15%, transparent);
}
.rems-focus-pulse .rems-label{
  position:absolute; top:28px; left:50%; transform:translateX(-50%);
  font-size:12px; padding:2px 8px; border-radius:999px;
  background: color-mix(in srgb, var(--bg) 80%, transparent);
  color: color-mix(in srgb, var(--accent) 75%, var(--text) 25%);
  white-space:nowrap;
  border:1px solid color-mix(in srgb, var(--accent) 25%, var(--border) 75%);
}
@keyframes rems-pulse{
  0% { box-shadow:0 0 0 0 color-mix(in srgb, var(--accent) 60%, transparent); }
  70%{ box-shadow:0 0 0 16px color-mix(in srgb, var(--accent) 0%, transparent); }
  100%{ box-shadow:0 0 0 0 color-mix(in srgb, var(--accent) 0%, transparent); }
}

/* 라이트 전용 */
html[data-theme="light"] .rems-table tbody td{ border-bottom:1px dashed color-mix(in srgb, var(--text) 6%, transparent); }
html[data-theme="light"] .rems-qa-btn{ box-shadow:0 6px 16px color-mix(in srgb, #000 10%, transparent); }
html[data-theme="light"] .rems-qa-btn:hover{ box-shadow:0 10px 22px color-mix(in srgb, #000 16%, transparent); }
html[data-theme="light"] .rems-count-bubble{
  background: color-mix(in srgb, #fff 95%, transparent);
  border: 1px solid color-mix(in srgb, #000 8%, transparent);
  color:#0f172a;
  box-shadow: 0 10px 26px color-mix(in srgb, #000 12%, transparent);
}
html[data-theme="light"] .rems-map-panel,
html[data-theme="light"] .rems-legend{
  background: color-mix(in srgb, #fff 88%, transparent);
  border:1px solid var(--border);
}

